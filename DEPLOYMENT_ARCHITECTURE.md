# Thalos Prime - Deployment Architecture

```
┌──────────────────────────────────────────────────────────────────────┐
│                         THALOS PRIME LIBRARY                          │
│                          Deployment Options                           │
└──────────────────────────────────────────────────────────────────────┘

┌─────────────────────────────────────────────────────────────────────┐
│                      1. Python Package (Library)                     │
├─────────────────────────────────────────────────────────────────────┤
│                                                                       │
│   Install: pip install -e .                                          │
│                                                                       │
│   ┌───────────────────────────────────────────────────────────┐    │
│   │  Python Application                                        │    │
│   │  ┌───────────────────────────────────────────────────┐    │    │
│   │  │  import thalos_prime                               │    │    │
│   │  │  from thalos_prime import (                       │    │    │
│   │  │      address_to_page,                             │    │    │
│   │  │      enumerate_addresses,                         │    │    │
│   │  │      score_coherence                              │    │    │
│   │  │  )                                                 │    │    │
│   │  └───────────────────────────────────────────────────┘    │    │
│   └───────────────────────────────────────────────────────────┘    │
│                                                                       │
└─────────────────────────────────────────────────────────────────────┘

┌─────────────────────────────────────────────────────────────────────┐
│                   2. API Server (Standalone Service)                 │
├─────────────────────────────────────────────────────────────────────┤
│                                                                       │
│   Start: python run_thalos.py or uvicorn ...                        │
│                                                                       │
│   ┌─────────────┐      ┌──────────────────────────────────┐        │
│   │   Client    │─────▶│  FastAPI Application             │        │
│   │ (Browser/   │      │  ┌────────────────────────────┐  │        │
│   │  curl/etc)  │      │  │  API Routes                │  │        │
│   └─────────────┘      │  │  /api/v1/generate          │  │        │
│         │              │  │  /api/v1/enumerate         │  │        │
│         │              │  │  /api/v1/decode            │  │        │
│         │              │  │  /api/v1/search            │  │        │
│         ▼              │  └────────────────────────────┘  │        │
│   http://localhost:8000│  ┌────────────────────────────┐  │        │
│   /docs                │  │  thalos_prime Core         │  │        │
│                        │  │  - BabelGenerator          │  │        │
│                        │  │  - BabelEnumerator         │  │        │
│                        │  │  - BabelDecoder            │  │        │
│                        │  └────────────────────────────┘  │        │
│                        └──────────────────────────────────┘        │
│                                                                       │
└─────────────────────────────────────────────────────────────────────┘

┌─────────────────────────────────────────────────────────────────────┐
│                     3. Docker Container (Isolated)                   │
├─────────────────────────────────────────────────────────────────────┤
│                                                                       │
│   Build: docker build -t thalos-prime .                              │
│   Run:   docker run -p 8000:8000 thalos-prime                       │
│                                                                       │
│   ┌───────────────────────────────────────────────────────────┐    │
│   │  Docker Container                                          │    │
│   │  ┌─────────────────────────────────────────────────────┐  │    │
│   │  │  Python 3.11 + Thalos Prime                         │  │    │
│   │  │  ├── FastAPI App (port 8000)                        │  │    │
│   │  │  ├── Uvicorn ASGI Server                            │  │    │
│   │  │  └── thalos_prime package                           │  │    │
│   │  └─────────────────────────────────────────────────────┘  │    │
│   │                           │                                │    │
│   │  ┌────────────────────────┼────────────────────────────┐  │    │
│   │  │  Volumes               ▼                            │  │    │
│   │  │  ./data:/app/data  (persistent storage)            │  │    │
│   │  └─────────────────────────────────────────────────────┘  │    │
│   └───────────────────────────────────────────────────────────┘    │
│                               │                                      │
│                               ▼                                      │
│                      Host: localhost:8000                            │
│                                                                       │
└─────────────────────────────────────────────────────────────────────┘

┌─────────────────────────────────────────────────────────────────────┐
│               4. Production Deployment (Full Stack)                  │
├─────────────────────────────────────────────────────────────────────┤
│                                                                       │
│   ┌───────────────┐                                                  │
│   │  Internet     │                                                  │
│   └───────┬───────┘                                                  │
│           │ HTTPS (443)                                              │
│           ▼                                                          │
│   ┌───────────────────────────────────────────────────┐             │
│   │  Nginx Reverse Proxy                              │             │
│   │  - SSL/TLS Termination                            │             │
│   │  - Load Balancing                                 │             │
│   │  - Rate Limiting                                  │             │
│   │  - Static File Serving                            │             │
│   └───────┬───────────────────────────────────────────┘             │
│           │ HTTP (localhost:8000)                                    │
│           ▼                                                          │
│   ┌───────────────────────────────────────────────────┐             │
│   │  Gunicorn (ASGI Server)                           │             │
│   │  └── Uvicorn Workers (4x)                         │             │
│   │      ├── Worker 1                                 │             │
│   │      ├── Worker 2                                 │             │
│   │      ├── Worker 3                                 │             │
│   │      └── Worker 4                                 │             │
│   │          │                                        │             │
│   │          ├─▶ FastAPI App                         │             │
│   │          └─▶ thalos_prime Core                   │             │
│   └───────┬───────────────────────────────────────────┘             │
│           │                                                          │
│           ▼                                                          │
│   ┌───────────────────────────────────────────────────┐             │
│   │  Systemd Service                                  │             │
│   │  - Auto-restart on failure                        │             │
│   │  - Logging                                        │             │
│   │  - Process management                             │             │
│   └───────────────────────────────────────────────────┘             │
│                                                                       │
│   ┌───────────────────────────────────────────────────┐             │
│   │  Monitoring & Logging                             │             │
│   │  - Prometheus (metrics)                           │             │
│   │  - Grafana (dashboards)                           │             │
│   │  - Syslog/CloudWatch (logs)                       │             │
│   └───────────────────────────────────────────────────┘             │
│                                                                       │
└─────────────────────────────────────────────────────────────────────┘

┌─────────────────────────────────────────────────────────────────────┐
│                        5. Cloud Deployments                          │
├─────────────────────────────────────────────────────────────────────┤
│                                                                       │
│  ┌──────────────┐  ┌──────────────┐  ┌──────────────┐              │
│  │    AWS       │  │   Azure      │  │    GCP       │              │
│  │              │  │              │  │              │              │
│  │ - Elastic    │  │ - Container  │  │ - Cloud Run  │              │
│  │   Beanstalk  │  │   Instances  │  │ - GKE        │              │
│  │ - ECS        │  │ - App Service│  │ - Compute    │              │
│  │ - EKS        │  │ - AKS        │  │   Engine     │              │
│  └──────────────┘  └──────────────┘  └──────────────┘              │
│                                                                       │
│  ┌──────────────┐  ┌──────────────┐  ┌──────────────┐              │
│  │   Heroku     │  │  Fly.io      │  │  Render      │              │
│  │              │  │              │  │              │              │
│  │ git push     │  │ fly deploy   │  │ Auto-deploy  │              │
│  │ heroku main  │  │              │  │ from GitHub  │              │
│  └──────────────┘  └──────────────┘  └──────────────┘              │
│                                                                       │
└─────────────────────────────────────────────────────────────────────┘

┌─────────────────────────────────────────────────────────────────────┐
│                     Component Architecture                           │
├─────────────────────────────────────────────────────────────────────┤
│                                                                       │
│   ┌──────────────────────────────────────────────────────────┐     │
│   │  thalos_prime Package                                     │     │
│   │                                                            │     │
│   │  ┌────────────────────┐  ┌────────────────────┐          │     │
│   │  │ BabelGenerator     │  │ BabelEnumerator    │          │     │
│   │  │                    │  │                    │          │     │
│   │  │ - address_to_page  │  │ - enumerate_      │          │     │
│   │  │ - text_to_address  │  │   addresses       │          │     │
│   │  │ - validate_page    │  │ - query_to_       │          │     │
│   │  │                    │  │   addresses       │          │     │
│   │  └────────────────────┘  └────────────────────┘          │     │
│   │                                                            │     │
│   │  ┌────────────────────┐  ┌────────────────────┐          │     │
│   │  │ BabelDecoder       │  │ Config & Utils     │          │     │
│   │  │                    │  │                    │          │     │
│   │  │ - score_coherence  │  │ - setup_imports   │          │     │
│   │  │ - decode_page      │  │ - get_config      │          │     │
│   │  │ - CoherenceScore   │  │ - logging         │          │     │
│   │  └────────────────────┘  └────────────────────┘          │     │
│   │                                                            │     │
│   │  ┌─────────────────────────────────────────────┐         │     │
│   │  │ API Module (Optional)                        │         │     │
│   │  │  - FastAPI routes                            │         │     │
│   │  │  - Server configuration                      │         │     │
│   │  │  - Middleware & auth                         │         │     │
│   │  └─────────────────────────────────────────────┘         │     │
│   └──────────────────────────────────────────────────────────┘     │
│                                                                       │
└─────────────────────────────────────────────────────────────────────┘

Legend:
  ─────▶  Data/Request Flow
  │       Vertical Connection
  ▼       Direction of Flow
  ┌─┐     Container/Component
  └─┘     Boundary
```

## Deployment Decision Tree

```
                        Start Here
                            │
                            ▼
        ┌───────────────────────────────────────┐
        │  What is your use case?               │
        └─────────┬────────────────────┬────────┘
                  │                    │
    ┌─────────────▼─────────┐    ┌────▼──────────────────┐
    │ Library/SDK           │    │ Web Service/API       │
    │ (Embedded in app)     │    │ (Standalone server)   │
    └─────────┬─────────────┘    └────┬──────────────────┘
              │                        │
              ▼                        ▼
    ┌─────────────────────┐    ┌─────────────────────────┐
    │ pip install -e .    │    │ Development or Prod?    │
    │ import thalos_prime │    └────┬────────────────┬───┘
    └─────────────────────┘         │                │
                                    ▼                ▼
                          ┌──────────────┐   ┌───────────────┐
                          │ Development  │   │  Production   │
                          │              │   │               │
                          │ run_thalos.py│   │ Docker or     │
                          │ or uvicorn   │   │ Bare Metal?   │
                          └──────────────┘   └───┬─────────┬─┘
                                                 │         │
                                            ┌────▼──┐   ┌──▼────┐
                                            │Docker │   │Systemd│
                                            │Compose│   │+Nginx │
                                            └───────┘   └───────┘
```

For detailed instructions, see [DEPLOYMENT.md](DEPLOYMENT.md)
